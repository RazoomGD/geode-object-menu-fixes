#include <Geode/Geode.hpp>

using namespace geode::prelude;

#include <Geode/modify/EditorUI.hpp>

#include "./generator.cpp"


struct ObjParameters {
	float scaleX, scaleY, anchorX, anchorY;
};

// generated using src/generator.cpp (there is no point to calculate these values every time)
static const std::unordered_map<short, ObjParameters> parametersForObjId = {
	{ 1685, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1686, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1687, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1688, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1689, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1690, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1691, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1692, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1693, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1694, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1695, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 1696, { 0.66, 0.66, 0.5, 0.5 }},
	{ 1797, { 0.6593407, 0.6593407, 0.5, 0.5 }},
	{ 472,  { 1, 1, 0.46666667, 0.6 }},
	{ 473,  { 1, 1, 0.46666667, 0.6 }},
	{ 474,  { 1, 1, 0.46666667, 0.6 }},
	{ 1205, { 1, 1, 0.46666667, 0.6 }},
	{ 1206, { 1, 1, 0.46666667, 0.6 }},
	{ 1207, { 1, 1, 0.46666667, 0.6 }},
	{ 1223, { 1, 1, 0.46666667, 0.6 }},
	{ 1224, { 1, 1, 0.46666667, 0.6 }},
	{ 1225, { 1, 1, 0.46666667, 0.6 }},
	{ 1261, { 0.969697, 0.969697, 0.46875, 0.59375 }},
	{ 1263, { 0.8888889, 0.8888889, 0.46875, 0.59375 }},
	{ 1265, { 0.75739646, 0.75739646, 0.46875, 0.5943081 }},
	{ 1309, { 1, 1, 0.46666667, 0.6 }},
	{ 1200, { 1, 1, 0.46666667, 0.6 }},
	{ 1201, { 1, 1, 0.46666667, 0.6 }},
	{ 918,  { 0.3833866, 0.3833866, 0.5, 0.5 }},
	{ 1584, { 0.44801092, 0.44801092, 0.5, 0.5 }},
	{ 1583, { 0.8, 0.8, 0.5, 0.5 }},
	{ 1849, { 0.8, 0.8, 0.4, 0.65 }},
	{ 1850, { 1.0, 1.0, 0.5, 0.6 }},
	{ 1851, { 1.3, 1.3, 0.5, 0.5 }},
	{ 1852, { 1, 1, 0.5, 0.675 }},
	{ 1853, { 0.9, 0.9, 0.5, 0.40610328 }},
	{ 1854, { 1.5, 1.5, 0.5, 0.65873015 }},
	{ 1855, { 3, 3, 0.5, 0.5 }},
	{ 1858, { 0.7, 0.7, 0.5, 0.29220778 }},
	{ 1856, { 1.5, 1.5, 0.5, 0.7 }},
	{ 1860, { 0.6, 0.6, 0.375, 0.5 }},
	{ 1840, { 0.7, 0.7, 0.5, 0.5 }},
	{ 1842, { 0.7, 0.7, 0.5, 0.5 }},
	{ 2020, { 0.9, 0.9, 0.375, 0.5 }},
	{ 2021, { 0.8, 0.8, 0.5, 0.658245 }},
	{ 2024, { 0.45, 0.45, 0.5, 0.5 }},
	{ 2025, { 0.5, 0.5, 0.5, 0.666 }},
	{ 2026, { 0.33333334, 0.33333334, 0.5, 0.5 }},
	{ 2027, { 0.25210083, 0.25210083, 0.5, 0.5 }},
	{ 2028, { 0.28846154, 0.28846154, 0.5, 0.5 }},
	{ 2029, { 0.4, 0.4, 0.75, 0.8 }},
	{ 2030, { 0.542, 0.542, 0.5, 0.9 }},
	{ 2031, { 0.5, 0.5, 0.5, 0.744 }},
	{ 2033, { 0.9, 0.9, 0.5, 0.65 }},
	{ 2034, { 1.4, 1.4, 0.5, 0.75 }},
	{ 2035, { 0.5, 0.5, 0.2, 0.5 }},
	{ 2036, { 0.5, 0.5, 0.2, 0.5 }},
	{ 2037, { 0.5, 0.5, 0.15, 0.5 }},
	{ 2038, { 0.7, 0.7, 0.25, 0.5 }},
	{ 2039, { 0.5, 0.5, 0.25, 0.5 }},
	{ 2041, { 0.75, 0.75, 0.5, 0.75 }},
	{ 2042, { 0.75, 0.75, 0.7, 0.75 }},
	{ 2045, { 0.75, 0.75, 0.35, 0.66 }},
	{ 2046, { 1, 1, 0.65, 0.5 }},
	{ 2047, { 0.85, 0.85, 0.5, 0.5 }},
	{ 2048, { 0.9, 0.9, 0.3333, 0.5 }},
	{ 2049, { 1, 1, 0.3333, 0.5 }},
	{ 2050, { 1, 1, 0.3333, 0.5 }},
	{ 2053, { 1.6, 1.6, 0.5, 0.5 }},
	{ 1525, { 0.269, 0.269, 0.5, 0.65 }},
	{ 1526, { 0.333, 0.333, 0.5, 0.65 }},
	{ 1527, { 0.464, 0.464, 0.5, 0.65 }},
	{ 1528, { 0.696, 0.696, 0.5, 0.65 }},
	{ 2055, { 0.38961038, 0.38961038, 0.5, 0.5 }},
	{ 2867, { 0.7, 0.7, 0.5, 0.7 }},
	{ 2868, { 1, 1, 0.6, 0.3 }},
	{ 2869, { 0.509, 0.509, 0.5, 0.6 }},
	{ 2871, { 0.6, 0.6, 0.4, 0.5 }},
	{ 2872, { 0.65, 0.65, 0.5, 0.55 }},
	{ 2876, { 0.547, 0.547, 0.5, 0.7 }},
	{ 2880, { 0.55, 0.55, 0.5, 0.5 }},
	{ 2892, { 0.386, 0.386, 0.5, 0.65 }},
	{ 2893, { 0.512, 0.512, 0.5, 0.65 }},
	{ 2695, { 30, 30, 0.5, 0.5 }},
	{ 2089, { 30, 30, 0.5, 0.5 }},
	{ 2097, { 30, 30, 0.5, 0.5 }},
	{ 2092, { 30, 30, 0.5, 0.5 }},
	{ 2155, { 1.7647059, 1.7647059, 0.5, 0.5 }},
	{ 2234, { 2, 2, 0.46875, 0.59375 }},
	{ 2236, { 2, 2, 0.46875, 0.59375 }},
	{ 3542, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 3543, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2309, { 2.6666667, 30, 0.5, 0.5 }},
	{ 2378, { 2.4615386, 30, 0.5, 0.5 }},
	{ 2636, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2628, { 2.6666667, 30, 0.5, 0.5 }},
	{ 2472, { 2, 2, 0.46875, 0.59375 }},
	{ 4377, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2474, { 2, 2, 0.46875, 0.59375 }},
	{ 4379, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2531, { 1.6, 30, 0.5, 0.5 }},
	{ 2520, { 1.2500001, 1.2500001, 0.5, 0.5 }},
	{ 2525, { 2.1333334, 2.1333334, 0.69831735, 0.5 }},
	{ 2530, { 2, 2, 0.5, 0.625 }},
	{ 2549, { 30, 30, 0.5, 0.5 }},
	{ 2555, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2557, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2565, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2569, { 1.875, 1.875, 0.46666667, 0.6142857 }},
	{ 2597, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2615, { 2.142857, 2.142857, 0.5, 0.5 }},
	{ 2616, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2618, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2661, { 2, 2, 0.5, 0.5 }},
	{ 2663, { 2, 2, 0.5, 0.5 }},
	{ 2672, { 2, 2, 0.5, 0.5 }},
	{ 2675, { 2, 2, 0.5, 0.5 }},
	{ 2678, { 2, 2, 0.5, 0.5 }},
	{ 2689, { 1.1428572, 30, 0.5, 0.5 }},
	{ 2690, { 1, 28, 0.484375, 0.5 }},
	{ 3111, { 30, 30, 0.5, 0.5 }},
	{ 3161, { 30, 30, 0.5, 0.5 }},
	{ 3258, { 30, 30, 0.5, 0.5 }},
	{ 3259, { 30, 30, 0.5, 0.5 }},
	{ 3274, { 30, 2, 0.5, 0.5 }},
	{ 3345, { 30, 30, 0.5, 0.5 }},
	{ 3364, { 30, 30, 0.5, 0.5 }},
	{ 3429, { 30, 4.266667, 0.5, 0.5 }},
	{ 3501, { 0.7692308, 0.7692308, 0.5, 0.5 }},
	{ 3502, { 0.71428573, 0.71428573, 0.5, 0.5 }},
	{ 3553, { 1.4999999, 1.4999999, 0.5, 0.5 }},
	{ 3554, { 1.5, 1.5, 0.5, 0.5 }},
	{ 3555, { 1.5, 1.5, 0.5, 0.5 }},
	{ 3556, { 1.4999999, 1.4999999, 0.5, 0.5 }},
	{ 3557, { 1.5000001, 1.5000001, 0.5, 0.5 }},
	{ 3568, { 2, 30, 0.5, 0.5 }},
	{ 3585, { 30, 4.266667, 0.5, 0.5 }},
	{ 3587, { 30, 4, 0.5, 0.5 }},
	{ 3589, { 4, 30, 0.5, 0.5 }},
	{ 3590, { 4, 30, 0.5, 0.5 }},
	{ 3592, { 30, 4, 0.5, 0.5 }},
	{ 3703, { 30, 4, 0.5, 0.5 }},
	{ 3705, { 4, 30, 0.5, 0.5 }},
	{ 3706, { 4, 30, 0.5, 0.5 }},
	{ 3708, { 30, 4, 0.5, 0.5 }},
	{ 3715, { 30, 4, 0.5, 0.5 }},
	{ 3717, { 4, 30, 0.5, 0.5 }},
	{ 3718, { 4, 30, 0.5, 0.5 }},
	{ 3720, { 30, 4, 0.5, 0.5 }},
	{ 3726, { 30, 30, 0.5, 0.5 }},
	{ 3728, { 30, 4, 0.5, 0.5 }},
	{ 3730, { 4, 30, 0.5, 0.5 }},
	{ 3731, { 4, 30, 0.5, 0.5 }},
	{ 3733, { 30, 4, 0.5, 0.5 }},
	{ 3739, { 30, 30, 0.5, 0.5 }},
	{ 3741, { 30, 4, 0.5, 0.5 }},
	{ 3743, { 4, 30, 0.5, 0.5 }},
	{ 3744, { 4, 30, 0.5, 0.5 }},
	{ 3746, { 30, 4, 0.5, 0.5 }},
	{ 3752, { 30, 30, 0.5, 0.5 }},
	{ 3754, { 30, 4, 0.5, 0.5 }},
	{ 3756, { 4, 30, 0.5, 0.5 }},
	{ 3757, { 4, 30, 0.5, 0.5 }},
	{ 3759, { 30, 4, 0.5, 0.5 }},
	{ 3766, { 30, 4, 0.5, 0.5 }},
	{ 3767, { 4, 30, 0.5, 0.5 }},
	{ 3769, { 30, 4, 0.5, 0.5 }},
	{ 3773, { 30, 4, 0.5, 0.5 }},
	{ 3779, { 30, 4, 0.5, 0.5 }},
	{ 3788, { 30, 4, 0.5, 0.5 }},
	{ 1832, { 1, 1, 0, 1 }},
	{ 1834, { 1, 1, 0, 1 }},
	{ 2443, { 1.875, 1.875, 0.46666667, 0.6 }},
	{ 2444, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 2451, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2447, { 1.875, 1.875, 0.5, 0.5 }},
	{ 2448, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 4225, { 30, 2.2857144, 0.5, 0.5 }},
	{ 2450, { 30, 3, 0.5, 0.56666666 }},
	{ 4048, { 30, 4, 0.5, 0.5 }},
	{ 4050, { 30, 4, 0.5, 0.5 }},
	{ 4055, { 30, 4, 0.5, 0.5 }},
	{ 4058, { 4.266667, 30, 0.5, 0.5 }},
	{ 4079, { 4.266667, 30, 0.5, 0.5 }},
	{ 4080, { 30, 4.266667, 0.5, 0.5 }},
	{ 4081, { 1.875, 1.875, 0.5, 0.5 }},
	{ 4082, { 1.8750002, 1.8750002, 0.5, 0.5 }},
	{ 4083, { 1.8750002, 1.8750002, 0.5, 0.5 }},
	{ 4084, { 1.875, 1.875, 0.5, 0.5 }},
	{ 4090, { 2, 30, 0.5, 0.5 }},
	{ 4104, { 30, 2.6666667, 0.5, 0.5 }},
	{ 4105, { 2.6666667, 30, 0.5, 0.5 }},
	{ 4106, { 2.6666667, 30, 0.5, 0.5 }},
	{ 4107, { 30, 2.6666667, 0.5, 0.5 }},
	{ 4115, { 4.266667, 30, 0.5, 0.5 }},
	{ 4118, { 30, 4, 0.5, 0.5 }},
	{ 4120, { 30, 4, 0.5, 0.5 }},
	{ 4121, { 4, 30, 0.5, 0.5 }},
	{ 4124, { 30, 3.2, 0.5, 0.5 }},
	{ 4130, { 2.2857144, 30, 0.5, 0.5 }},
	{ 4133, { 3.2, 30, 0.5, 0.5 }},
	{ 4200, { 2.6666667, 30, 0.5, 0.5 }},
	{ 4201, { 3, 3, 0.5, 0.5 }},
	{ 4203, { 4.266667, 30, 0.5, 0.5 }},
	{ 4210, { 4.266667, 30, 0.5, 0.5 }},
	{ 4227, { 30, 2, 0.5, 0.5 }},
	{ 4229, { 2.2857144, 30, 0.5, 0.5 }},
	{ 4232, { 2, 30, 0.5, 0.5 }},
	{ 4122, { 30, 2, 0.5, 0.5 }},
	{ 3793, { 2.5000002, 2.5000002, 0.5, 0.5 }},
	{ 4243, { 2, 30, 0.5, 0.5 }},
	{ 4251, { 30, 1.1851852, 0.5, 0.5 }},
	{ 4253, { 1.1851852, 30, 0.5, 0.5 }},
	{ 4256, { 2, 30, 0.5, 0.5 }},
	{ 4258, { 2, 30, 0.5, 0.5 }},
	{ 4264, { 2, 30, 0.5, 0.5 }},
	{ 4303, { 30, 2, 0.5, 0.5 }},
	{ 4314, { 30, 30, 0.5, 0.5 }},
	{ 4343, { 4.266667, 30, 0.5, 0.5 }},
	{ 3092, { 30, 30, 0.5, 0.5 }},
	{ 3093, { 15, 15, 0.5, 0.5 }},
	{ 3094, { 10, 10, 0.5, 0.5 }},
	{ 3095, { 7.5, 7.5, 0.5, 0.5 }},
	{ 3096, { 6, 6, 0.5, 0.5 }},
	{ 3097, { 5, 5, 0.5, 0.5 }},
	{ 1760, { 0.8092565, 0.8092565, 0.5, 0.5 }},
	{ 1761, { 0.46531746, 0.46531746, 0.5, 0.5 }},
	{ 1758, { 0.6796228, 0.6796228, 0.5, 0.5 }},
	{ 1759, { 0.43513423, 0.43513423, 0.5, 0.5 }},
	{ 1762, { 0.5857865, 0.5857865, 0.5, 0.5 }},
	{ 1763, { 0.4086282, 0.4086282, 0.5, 0.5 }},
	{ 1831, { 1, 1, 0, 1.0666667 }},
	{ 1833, { 1, 1, 0, 1.0666667 }},
	{ 1194, { 1, 1, 0.46666667, 0.6 }},
	{ 2488, { 2, 2, 0.5, 0.6875 }},
	{ 4380, { 2.4615386, 2.4615386, 0.5, 0.67410713 }},
	{ 2489, { 2, 2, 0.5, 0.6875 }},
	{ 4381, { 2.2857144, 2.2857144, 0.5, 0.6875 }},
	{ 2490, { 2, 2, 0.5, 0.6875 }},
	{ 4382, { 2.1333334, 2.1333334, 0.5, 0.70089287 }},
	{ 2491, { 2, 2, 0.5, 0.6875 }},
	{ 4383, { 2, 2, 0.5, 0.71428573 }},
	{ 2502, { 2, 2, 0.5, 0.6875 }},
	{ 2503, { 2, 2, 0.5, 0.6875 }},
	{ 2541, { 2, 2, 0.5, 0.71428573 }},
	{ 2543, { 2.1333334, 2.1333334, 0.5, 0.70089287 }},
	{ 2545, { 2, 2, 0.5, 0.71428573 }},
	{ 2547, { 2.4615386, 2.4615386, 0.5, 0.67410713 }},
	{ 2555, { 1.875, 1.875, 0.5, 0.7285714 }},
	{ 2557, { 1.875, 1.875, 0.5, 0.7285714 }},
	{ 2570, { 2, 2, 0.5, 0.6875 }},
	{ 2571, { 2.2857144, 2.2857144, 0.5, 0.6875 }},
	{ 2572, { 2, 2, 0.5, 0.6875 }},
	{ 2573, { 2, 2, 0.5, 0.71428573 }},
	{ 2574, { 2, 2, 0.5, 0.6875 }},
	{ 2575, { 2.4615386, 2.4615386, 0.5, 0.67410713 }},
	{ 2576, { 2, 2, 0.5, 0.6875 }},
	{ 2577, { 2.909091, 2.909091, 0.5, 0.6473214 }},
	{ 2578, { 2, 2, 0.5, 0.6875 }},
	{ 2579, { 2.6666667, 2.6666667, 0.5, 0.66071427 }},
	{ 2621, { 2.1333334, 2.1333334, 0.5, 0.6875 }},
	{ 2638, { 2.2857144, 2.2857144, 0.5, 0.7019231 }},
	{ 2639, { 2.4615386, 2.4615386, 0.4375, 0.5 }},
	{ 2643, { 2.1333334, 2.1333334, 0.4278846, 0.5 }},
	{ 2645, { 2.2857144, 2.2857144, 0.43269232, 0.5 }},
	{ 2650, { 2.1333334, 2.1333334, 0.4278846, 0.5 }},
	{ 2652, { 2.4615386, 2.4615386, 0.5, 0.6875 }},
	{ 2653, { 2.4615386, 2.4615386, 0.4375, 0.5 }},
	{ 2655, { 2.4615386, 2.4615386, 0.5, 0.6875 }},
	{ 2656, { 2.4615386, 2.4615386, 0.4375, 0.5 }},
	{ 2659, { 2.4615386, 2.4615386, 0.4375, 0.5 }},
	{ 2661, { 2, 2, 0.5, 0.7 }},
	{ 2665, { 2.1333334, 2.1333334, 0.5, 0.71634614 }},
	{ 2675, { 2, 2, 0.5, 0.7 }},
	{ 2680, { 2.2857144, 2.2857144, 0.5, 0.7019231 }},
	{ 2682, { 2.4615386, 2.4615386, 0.5, 0.6875 }},
	{ 2683, { 2.909091, 2.909091, 0.4471154, 0.5 }},
	{ 2685, { 2.4615386, 2.4615386, 0.5, 0.6875 }},
	{ 2686, { 2.909091, 2.909091, 0.4471154, 0.5 }},
	{ 3106, { 2, 2, 0.5, 0.71428573 }},
	{ 3153, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3154, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3155, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3156, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3157, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3158, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3159, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3160, { 1.6666666, 1.6666666, 0.5, 0.5 }},
	{ 3177, { 2, 2, 0.46875, 0.59375 }},
	{ 3180, { 2, 2, 0.5, 0.6666667 }},
	{ 3335, { 2.2857144, 2.2857144, 0.4375, 0.5 }},
	{ 3353, { 2.2857144, 2.2857144, 0.5, 0.6875 }},
	{ 3355, { 2, 2, 0.5, 0.71428573 }},
	{ 3398, { 2.1333334, 2.1333334, 0.5, 0.734375 }},
	{ 3399, { 2, 2, 0.5, 0.75 }},
	{ 3400, { 2, 2, 0.5, 0.75 }},
	{ 3401, { 2.1333334, 2.1333334, 0.5, 0.734375 }},
	{ 4010, { 2.1333334, 2.1333334, 0.5, 0.70089287 }},
	{ 4011, { 2, 2, 0.5, 0.71428573 }},
	{ 2455, { 2.2857144, 2.2857144, 0.5, 0.6875 }},
	{ 2440, { 2, 2, 0.5, 0.71428573 }},
	{ 4038, { 2, 2, 0.5, 0.6875 }},
	{ 4039, { 2, 2, 0.5, 0.6875 }},
	{ 4164, { 1, 1, 0.45238096, 0.5 }},
};


static const std::unordered_map<short, short> animationFrames {
	{2021, 2},
	{2025, 5},
	{2040, 2},
	{2043, 5},
	{2045, 4},
	{2051, 4},
	{2052, 2},
	{2053, 2},
	{2867, 5},
	{2868, 2},
	{2869, 6},
	{2870, 7},
	{2871, 4},
	{2872, 4},
	{2875, 4},
	{2876, 5},
	{2877, 7},
	{2878, 7},
	{2880, 5},
	{2881, 4},
	{2882, 3},
	{2883, 2},
	{2884, 4},
	{2885, 3},
};


inline void handleObject(GameObject* obj, ObjParameters const &params) {
	if (obj->m_colorSprite) {
		// fix m_colorSprite bug
		auto sprPos = obj->m_colorSprite->getPosition();
		auto sprScX = obj->m_colorSprite->getScaleX();
		auto sprScY = obj->m_colorSprite->getScaleY();
		obj->setScaleX(params.scaleX);
		obj->setScaleY(params.scaleY);
		obj->m_colorSprite->setPosition(sprPos);
		obj->m_colorSprite->setScaleX(sprScX);
		obj->m_colorSprite->setScaleY(sprScY);
	}  else {
		obj->setScaleX(params.scaleX);
		obj->setScaleY(params.scaleY);
	}
	obj->setAnchorPoint({params.anchorX, params.anchorY});
}


class $modify(EditorUI) {

	CreateMenuItem* getCreateBtn(int id, int bg) {

		auto btn = EditorUI::getCreateBtn(id, bg);

		if (auto btnSpr = static_cast<ButtonSprite*>(btn->getNormalImage())) {
			if (auto obj = static_cast<GameObject*>(btnSpr->m_subSprite)) {

				// scale and position
				auto it = parametersForObjId.find(id);
				if (it != parametersForObjId.end()) {
					handleObject(obj, it->second);
				}

				// animation frames
				auto it2 = animationFrames.find(id);
				if (it2 != animationFrames.end()) {
					static_cast<EnhancedGameObject*>(obj)->updateSyncedAnimation(0, it2->second);
				}

				// special changes
				switch (id) {
					case 747: {
						obj->setAnchorPoint(ccp(1, 0.5));
						auto spr = CCSprite::createWithSpriteFrameName("portal_16_front_001.png");
						obj->addChild(spr);
						spr->setPosition(ccp(83,45));
						spr->setFlipX(true);
						obj->setCascadeColorEnabled(true);
						obj->setCascadeOpacityEnabled(true);
						break;
					}
					case 2046: {
						auto cache = CCSpriteFrameCache::get();
						obj->setDisplayFrame(cache->spriteFrameByName("gj22_anim_27_003.png"));
						obj->m_colorSprite->setDisplayFrame(cache->spriteFrameByName("gj22_anim_27_color_003.png"));
						break;
					}
					case 2047: {
						auto cache = CCSpriteFrameCache::get();
						obj->setDisplayFrame(cache->spriteFrameByName("gj22_anim_28_005.png"));
						obj->m_colorSprite->setDisplayFrame(cache->spriteFrameByName("gj22_anim_28_color_005.png"));
						break;
					}
				}
			}
		}
		
		return btn;
	}

};
